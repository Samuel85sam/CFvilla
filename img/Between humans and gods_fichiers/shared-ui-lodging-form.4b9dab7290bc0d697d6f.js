/*@license For license information please refer to shared-ui-lodging-form.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8153],{82217:function(e,n,t){t.d(n,{G5:function(){return oe},HB:function(){return ie},I:function(){return te},Ix:function(){return Z},Mm:function(){return tn},Mr:function(){return Ke},Nn:function(){return en},Po:function(){return nn},g_:function(){return ve},qG:function(){return J},vw:function(){return K}});var r=t(67294),a=t(69430),o=t(95878),i=t(74565),u=t(98250),c=t(64418),l=t(29892),d=t(85395),s=t(73359),m=t(61348),f=t(73030),v=t(71641),p=t(89313),g=t(91187),y=t(27483),h=t(57758),D=t(70272),b=t(41496),E=t(84829),I=t(11719),C=t(94737),k=t(62679),x=t(45987);function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}function P(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function S(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function T(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(u)throw a}}return o}}(e,n)||_(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function F(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}function L(){var e=N(["\n  query FormQuery($context: ContextInput!, $propertyId: String!, $roomInput: [RoomInput!], $dateRange: PropertyDateRangeInput) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      searchForm(roomInput: $roomInput, dateRange: $dateRange) @client {\n        id\n        method\n        action\n      }\n    }\n  }\n"]);return L=function(){return e},e}function w(){var e=N(["\n  query DateFieldRatesQuery($context: ContextInput!, $propertyId: String!, $roomInput: [RoomInput!]!, $dateRange: PropertyDateRangeInput!) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      id\n      propertyCalendar(dateRange: $dateRange, roomInput: $roomInput) {\n        propertyCalendarRates {\n          date {\n            isoFormat\n          }\n          displayPrice\n          accessibilityLabel\n          theme\n        }\n        disclaimer {\n          value\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}function M(){var e=N(["\n  fragment DateOrderValidationFragment on DateOrderValidation {\n    events\n    error\n  }\n"]);return M=function(){return e},e}function j(){var e=N(["\n  fragment EndDateRequiredValidationFragment on EndDateRequiredValidation {\n    events\n    error\n  }\n"]);return j=function(){return e},e}function B(){var e=N(["\n  fragment MaxDateRangeValidationFragment on MaxDateRangeValidation {\n    events\n    error\n    maxDateRange\n  }\n"]);return B=function(){return e},e}function V(){var e=N(["\n  fragment StartDateRequiredValidationFragment on StartDateRequiredValidation {\n    events\n    error\n  }\n"]);return V=function(){return e},e}function G(){var e=N(["\n  fragment DateFieldFragment on LodgingFormDateField {\n    startId\n    startName\n    startLabel\n    startPlaceholder\n    startInvalid\n\n    endId\n    endName\n    endLabel\n    endPlaceholder\n    endInvalid\n\n    buttonText\n    daysBookableInAdvance\n    midnightBookingOffset\n\n    validations {\n      ...DateOrderValidationFragment\n      ...MaxDateRangeValidationFragment\n      ...StartDateRequiredValidationFragment\n      ...EndDateRequiredValidationFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return G=function(){return e},e}function U(){var e=N(["\n  fragment SubmitButtonFragment on LodgingFormSubmitButton {\n    label\n  }\n"]);return U=function(){return e},e}function H(){var e=N(["\n  query FormFieldQuery($context: ContextInput!, $propertyId: String!) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      searchForm @client {\n        fields {\n          ...DateFieldFragment\n          ...SubmitButtonFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return H=function(){return e},e}function $(){var e=N(["\n  fragment TravelersSummaryFragment on TravelersSummary {\n    roomsAndGuests\n  }\n"]);return $=function(){return e},e}function q(){var e=N(["\n  fragment ChildrenAgesFragment on ChildrenAges {\n    childAgeUpdatedLiveAnnounce\n    selectChildAgeLabel\n    youngestChildAgeText\n  }\n"]);return q=function(){return e},e}function z(){var e=N(["\n  fragment TravelersStepInputFragment on StepInput {\n    title\n    increaseText\n    decreaseText\n    caption\n  }\n"]);return z=function(){return e},e}function Q(){var e=N(["\n  fragment RoomFragment on RoomField {\n    roomTitleAriaLabel\n    roomTitle\n    removeRoomButtonLabel\n    removeRoomButtonAriaLabel\n    roomRemovedLiveAnnounce\n\n    adultsStepInput {\n      ...TravelersStepInputFragment\n    }\n    childrenStepInput {\n      ...TravelersStepInputFragment\n    }\n\n    childrenAges {\n      ...ChildrenAgesFragment\n    }\n  }\n\n  ","\n  ","\n"]);return Q=function(){return e},e}function W(){var e=N(["\n  fragment RoomPickerFragment on LodgingFormTravelers {\n    roomPicker {\n      toolBarIconLabel\n      toolBarTitle\n      addRoomText\n      doneLabel\n      roomAddedLiveAnnounce\n      room {\n        ...RoomFragment\n      }\n    }\n    travelersSummary {\n      ...TravelersSummaryFragment\n    }\n  }\n\n  ","\n  ","\n"]);return W=function(){return e},e}function X(){var e=N(["\n  fragment TravelersFieldFragment on LodgingFormTravelers {\n    label\n    travelersSummary {\n      ...TravelersSummaryFragment\n    }\n    ...RoomPickerFragment\n  }\n\n  ","\n  ","\n"]);return X=function(){return e},e}var K=function(e){return e.ON_CHANGE="ON_CHANGE",e.ON_LOAD="ON_LOAD",e.ON_SUBMIT="ON_SUBMIT",e}(K||{}),Y=r.createContext((function(){})),J=function(){return r.useContext(Y)},Z=Y.Provider,ee=r.createContext(null),ne=function(){return r.useContext(ee)},te=function(e){var n=e.children,t=e.value,a=(0,o.v)().context;return r.createElement(ee.Provider,{value:P(O({},t),{context:a})},n)},re=r.createContext({addExecutor:function(e){return[e]}}),ae=re.Provider,oe=((0,a.Ps)(L()),function(e){var n=e.inputs,t=e.data,a=e.children,i=e.formRef,u=(0,o.v)().context,c=T(r.useState([]),2),l=c[0],d=c[1],s=r.useCallback((function(e){d(F(l).concat([e]))}),[l,d]),m=P(O({},n||{}),{context:u}),f=J(),v=r.useCallback((function(e){var n=new FormData(e.target);l.some((function(e){return!e(n,"ON_SUBMIT")}))?e.preventDefault():f({type:"submit",event:e,data:n})}),[f,l]);if(!t)return null;var p=t.method,g=t.action,y=t.id;return r.createElement("form",{method:p,action:g,id:y,onSubmit:v,"data-stid":"lodging-form",ref:i},r.createElement(te,{value:m},r.createElement(ae,{value:{addExecutor:s}},a)))});oe.displayName="sharedui-LodgingForm";var ie=(0,r.createContext)({referrer:{pagePrefix:""}});function ue(){return(0,r.useContext)(ie)}var ce=(0,a.Ps)(w()),le=function(){return{}},de=function(e){switch(e){case"AGGRESSIVE":return"negative";case"HIGHLIGHT":return"positive";default:return""}},se=function(e,n){var t=new Set,r=n.map((function(e){return t.add(e.date.isoFormat),e}));return e.filter((function(e){return!t.has(e.date.isoFormat)})).forEach((function(e){r.push(e)})),r},me=function(e,n){var t=n.fetchMoreResult;return t?!e||"object"==typeof e&&0===Object.keys(e).length?t:{propertyInfo:P(O({},e.propertyInfo),{propertyCalendar:P(O({},e.propertyInfo.propertyCalendar),{disclaimer:t.propertyInfo.propertyCalendar.disclaimer,propertyCalendarRates:se(e.propertyInfo.propertyCalendar.propertyCalendarRates,t.propertyInfo.propertyCalendar.propertyCalendarRates)})})}:e},fe=function(e,n){return function(t){var r,a=function(e,n){var t=new Date,r=new Date(e);r.setDate(e.getDate()-n/2);var a=r;r<t&&(a=t);var o=new Date(a);return o.setDate(o.getDate()+n),{startDate:a,endDate:o}}(t,90),o=a.startDate,i=a.endDate,u={checkInDate:{day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear()},checkOutDate:{day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear()}},c=P(O({},n||{}),{dateRange:u});null===(r=e)||void 0===r||r({variables:c,updateQuery:me})}},ve=function(e){var n,t,a=P(O({},ne()),{roomInput:[{adults:2}]}),o=T((0,s.t)(ce,{ssr:!1,variables:a||{}}),2),i=o[0],u=o[1],c=u.data,l=u.fetchMore;return r.useEffect((function(){e&&i()}),[i,e]),e?[function(e){if(e)return e.reduce((function(e,n){var t=O({},e);return t[n.date.isoFormat]={text:n.displayPrice,className:de(n.theme),ariaLabel:n.accessibilityLabel},t}),{})}(null===(n=c)||void 0===n?void 0:n.propertyInfo.propertyCalendar.propertyCalendarRates),(null===(t=c)||void 0===t?void 0:t.propertyInfo.propertyCalendar.disclaimer.value)||"",fe(l,a)]:[{},"",le]},pe=function(e,n,t){return{id:e,description:n,callback:function(){return t(e,n,!0)}}},ge=function(e){return e},ye=(0,a.Ps)(M());var he=(0,a.Ps)(j());var De=(0,a.Ps)(B());var be=(0,a.Ps)(V());function Ee(e,n,t){return n&&n.length?n.reduce((function(n,r){var a,o,i,u=!0,c=null;if(!r.events.find((function(n){return n===e})))return n;switch(r.__typename){case"DateOrderValidation":var l;u=(l=T((o=(a=t).startDate,i=a.endDate,o&&i&&ke(o)&&ke(i)?[o<i,"end"]:[!0,"start"]),2))[0],c=l[1];break;case"MaxDateRangeValidation":var d;d=T(function(e,n){var t=n.startDate,r=n.endDate;if(!(t&&r&&ke(t)&&ke(r)))return[!0,"end"];var a=new Date(t);return a.setDate(a.getDate()+e.maxDateRange),[r<=a,"end"]}(r,t),2),u=d[0],c=d[1];break;case"StartDateRequiredValidation":var s;s=T(function(e,n){var t=n.startDate;return t&&ke(t)?[!0,"start"]:[!1,"start"]}(0,t),2),u=s[0],c=s[1];break;case"EndDateRequiredValidation":var m;m=T(function(e,n){var t=n.endDate;return t&&ke(t)?[!0,"start"]:[!1,"end"]}(0,t),2),u=m[0],c=m[1]}return u?n:(n.push({message:r.error,dateType:c}),F(n))}),[]):[]}var Ie=new Date,Ce=(0,a.Ps)(G(),ye,De,be,he),ke=function(e){return Boolean(e&&"Invalid Date"!==e.toDateString())},xe=function(e){if(e){var n=e.year,t=e.month,r=e.day;return new Date(n,t-1,r)}},Ae=function(e){return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},Re=function(e){var n,t;"function"==typeof(null===(t=e)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.focus)&&e.current.focus()},Oe=function(e){var n,t,a,o,s,v,p,g,y=e.autoOpenCalendar,h=e.closeOnSubmit,D=void 0===h||h,b=e.data,E=e.endDateRef,I=e.fieldName,C=e.isOpenOverride,k=e.startDateRef,x=e.onDismiss,A=e.mediumDateFormatProp,R=b.buttonText,N=b.daysBookableInAdvance,F=b.midnightBookingOffset,_=b.validations,L=S(b,["buttonText","daysBookableInAdvance","midnightBookingOffset","validations"]),w=ue().referrer,M=T(r.useState(!1),2),j=M[0],B=M[1],V=T(r.useState(L.startInvalid),2),G=V[0],U=V[1],H=T(r.useState(L.endInvalid),2),$=H[0],q=H[1],z=J(),Q=ne(),W=r.useContext(re).addExecutor,X=(0,l.useLocalization)(),K=X.formatDateString,Y=X.getWeekData,Z=(0,d.wL)().warning,ee=(0,u.useClickTracker)(),te=r.useMemo((function(){var e,n;return xe(null===(n=Q)||void 0===n||null===(e=n.dateRange)||void 0===e?void 0:e.checkInDate)}),[Q]),ae=r.useMemo((function(){var e,n;return xe(null===(n=Q)||void 0===n||null===(e=n.dateRange)||void 0===e?void 0:e.checkOutDate)}),[Q]),oe=r.useMemo((function(){return function(e,n,t){return{startAnalytics:pe("".concat(e,":ChangeDatesCheckIn"),"Open Date Picker",n),endAnalytics:pe("".concat(e,":ChangeDatesCheckOut"),"Open Date Picker",n),datePickerAnalytics:{closeAnalytics:pe("".concat(e,":ChangeDatesClose"),"Close Date Picker",n),doneAnalytics:t?pe("".concat(e,":ChangeDatesDone"),"Apply Date Picker",n):pe("".concat(e,":Datepicker-Done-Button-Pressed"),"Search Date Picker",n),nextPageAnalytics:pe("".concat(e,":NextMonthClick"),"Next Month Click",n),previousPageAnalytics:pe("".concat(e,":PreviousMonthClick"),"Previous Month Click",n)}}}(w.pagePrefix,ee,Boolean(te||ae))}),[ee,te,ae,w]),ie=T((n=T((0,f.useDialog)("datepicker-start"),3),t=n[0],a=n[1],o=n[2],s=T((0,f.useDialog)("datepicker-end"),3),v=s[0],p=s[1],g=s[2],[function(e,n){return n===i.I4.END?r.createElement(m.Xw,{isVisible:v},r.createElement(g,null,e)):r.createElement(m.Xw,{isVisible:t},r.createElement(o,null,e))},function(e){e===i.I4.END?p.openDialog():a.openDialog()},function(){v?p.closeDialog():a.closeDialog()}]),3),ce=ie[0],le=ie[1],de=ie[2],se=(0,c.useExperiment)("AvailCal_High_and_Low_Web"),me=se.exposure,fe=se.logExperiment,ye=r.useMemo((function(){return function(e,n,t){var r=Ee(e,_,{startDate:n,endDate:t});if(r.length){var a;if(z({type:"error",field:I,errors:r}),"ON_LOAD"!==e)"start"===(null===(a=r[0])||void 0===a?void 0:a.dateType)?Re(k):Re(E);return r.forEach((function(e){"end"===e.dateType?q(e.message):U(e.message)})),!1}return!0}}),[_,z,I,k,E]),he=T(ve(ke(te)&&ke(ae)),3),De=he[0],be=he[1],Ce=he[2],Oe=parseInt(i.Co[Y().firstDay.toUpperCase()],10);r.useEffect((function(){W((function(e,n){var t=new Date(e.get(b.startName)),r=new Date(e.get(b.endName));return ye(n,t,r)})),te&&ae&&ye("ON_LOAD",te,ae),y&&B(!0)}),[]),r.useEffect((function(){B(!!y)}),[y]);var Pe=P(O({},L),{endInvalid:$,startInvalid:G,routerLinkWrapper:ge,showDatePicker:void 0!==C?C:j,startAnalytics:oe.startAnalytics,endAnalytics:oe.endAnalytics,mediumDateFormatProp:A}),Se={analytics:oe.datePickerAnalytics,dateFieldProps:Pe,datePickerContent:De,footerText:be,dialogWrapper:ce,onOpenCB:function(e,n){var t;te&&(null===(t=Ce)||void 0===t||t(te));n&&le(e),fe(me),De&&Object.keys(De).length>0&&ee("".concat(w.pagePrefix,".Property_Calendar.Rates"),"Calendar Rates visible to user"),B(!0)},onSubmitCB:function(e,n,t){var r,a,o,i;t?D&&de():B(!1),(null===(r=e)||void 0===r?void 0:r.toDateString())===(null===(a=te)||void 0===a?void 0:a.toDateString())&&(null===(o=n)||void 0===o?void 0:o.toDateString())===(null===(i=ae)||void 0===i?void 0:i.toDateString())||(U(""),q(""),ye("ON_CHANGE",e,n)?z({type:"change",field:I,value:{dates:e&&n?{checkInDate:Ae(e),checkOutDate:Ae(n)}:void 0}}):t&&D&&de())},onDismissCB:function(e){e&&x?x():e?de():B(!1)},buttonText:R,startDate:te&&ke(te)?K(te,{raw:"yyyy-MM-dd"}):"",endDate:ae&&ke(ae)?K(ae,{raw:"yyyy-MM-dd"}):"",doubleMonths:!0,daysBookableInAdvance:N||void 0,firstDayOfWeek:Oe,midnightBookingOffset:F||void 0,validStartDate:K(Ie,{raw:"yyyy-MM-dd"}),startDateRef:k,endDateRef:E};return(G||$)&&Z("SEARCH_FORM_DATE_RANGE_ERROR","".concat(G," | ").concat($),"startDate=".concat(te," endDate=").concat(ae)),r.createElement(i.HG,O({},Se))};Oe.displayName="DateField",(Oe.fragment=Ce).__typename="LodgingFormDateField";var Pe=function(e){var n=[],t=e.campaignId,r=e.events,a=e.clientSideAnalytics;if(a){var o,i=a.referrerId,u=a.eventType,c=a.linkName;n.push({messageContent:{referrerId:i,eventType:(null===(o=u)||void 0===o?void 0:o.toLowerCase())||"click",linkName:c},schemaName:"referrer"})}return t&&r&&n.push(function(e,n){var t;return{schemaName:"multiArmedBandit",messageContent:{campaignId:e,events:null===(t=n)||void 0===t?void 0:t.reduce((function(e,n){return F(e).concat([{payloadId:n.payloadId,eventType:n.eventType,eventTarget:n.eventTarget,banditDisplayed:n.banditDisplayed}])}),[])}}}(t,r)),n},Se=(0,a.Ps)(U()),Te=function(e){var n=e.data,t=e.className,a=e.inputRef,o=n.label,i=T((0,r.useContext)(g.EW),1)[0],c=i.amenitiesAdaptExSuccessEvents,l=i.nearByPoisAdaptExSuccessEvents,d=ue().referrer,s=(0,u.useClickTracker)(),m=(0,u.useClickstreamAnalytics)().track;return r.createElement(p.EA,{onClick:function(){s("".concat(d.pagePrefix,":Datepicker-Check-Availability"),"Check Availability"),F(c).concat(F(l)).forEach((function(e){m(u.ITrackType.EVENT,{data:Pe(O({},e))})}))},className:t,type:"submit",domRef:a,isFullWidth:!0,size:p.Pl.LARGE},o)};(Te.fragment=Se).__typename="LodgingFormSubmitButton",Te.displayName="SubmitButton";var Ne=(0,a.Ps)(H(),Oe.fragment,Te.fragment);function Fe(e){var n=function(e){var n=function(n){var t,a,o=n.skipSsr,i=ne(),u=(0,v.a)(Ne,{variables:i||{},ssr:!o}),c=u.data,l=u.error,d=u.loading;if(l||d)return null;var s=null===(a=c)||void 0===a||null===(t=a.propertyInfo.searchForm)||void 0===t?void 0:t.fields.find((function(n){return n.__typename===e.fragment.__typename}));return s?r.createElement(e,O({data:s},n)):null};return n.displayName="".concat(e.displayName,"Query"),n}(e),t=r.memo((function(t){var a=t.data;return void 0!==a?r.createElement(e,P(O({},t),{data:a})):r.createElement(n,O({},t))}));return t.displayName="".concat(e.displayName,"Isomorphic"),t}function _e(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.replace(/({\d})/g,(function(e){var n=parseInt(e.slice(1,-1),10);return t[n]}))}var Le=r.createContext((function(){})),we=function(){return r.useContext(Le)},Me=Le.Provider,je=(0,a.Ps)($()),Be=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.rooms,o=r.useMemo((function(){return a&&a.length>0?a.reduce((function(e,n){return e+(n.adults||0)}),0):0}),[a])+r.useMemo((function(){return a&&a.length>0?a.reduce((function(e,n){var t;return e+((null===(t=n.children)||void 0===t?void 0:t.length)||0)}),0):0}),[a]),i=(0,l.useLocalization)().formatText;if(!t)return o.toString();var u=a.length;return i(n.roomsAndGuests,u,o)},Ve=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=e;return t.forEach((function(e,n){var t=new RegExp("\\{".concat(n,"\\}"),"g");a=a.replace(t,e.toString())})),a},Ge=(0,a.Ps)(q()),Ue=function(e){var n=e.childAge,t=e.childIndex,a=e.roomIndex,o=e.data,i=o.childAgeUpdatedLiveAnnounce,c=o.selectChildAgeLabel,l=o.youngestChildAgeText,d=we(),s=(0,u.useClickTracker)(),m=ue().referrer,f=r.useMemo((function(){return function(e){for(var n=[],t=0;t<=17;t+=1){var r=0===t?_e(e,1):t.toString();n.push({value:"".concat(t),name:r})}return n}(l)}),[l]),v="child-".concat(a,"-").concat(t),p="age-".concat(t);return r.createElement(y.oF,{label:_e(c,t+1),id:p,name:v,value:n.toString(),onChange:function(e){var n=parseInt(e.target.value,10);Number.isNaN(n)||d({type:"UPDATE_CHILD_AGE",roomIndex:a,childIndex:t,childAge:n}),s("".concat(m.pagePrefix,":ROOM.").concat(a,".Child.").concat(t,".AGE.").concat(n),"Child age update"),(0,C.Pg)(_e(i,t,n),C.aC.POLITE)}},f.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)})))};Ue.displayName="ChildrenAges",Ue.fragment=Ge;var He=(0,a.Ps)(z()),$e=function(e){var n,t=e.data,a=e.min,o=e.max,i=e.roomIndex,c=e.roomCount,l=e.room,d=e.travelerType,s=t.title,m=t.increaseText,f=t.decreaseText,v=t.caption,p=ue().referrer,g=(0,u.useClickTracker)(),y=we(),h="adults"===d?"UPDATE_ADULTS_COUNT":"UPDATE_CHILDREN_COUNT",D=r.useMemo((function(){return{id:"".concat(p.pagePrefix,":Guest"),description:"Adjust guest count in change search",callback:function(e,n){return g(e,n)}}}),[g]),b="room-".concat(c,"-").concat(i,"-").concat(d),E="adults"===d?l.adults:null===(n=l.children)||void 0===n?void 0:n.length;return r.createElement(x.eG,{label:s,incrementText:_e(m,i+1),incrementId:"".concat(b,"-increase"),decrementText:_e(f,i+1),decrementId:"".concat(b,"-decrease"),description:v||void 0,min:a,max:o,value:E,onChange:function(e){var n=parseInt(e.target.value,10);Number.isNaN(n)||y({type:h,roomIndex:i,count:n})},analytics:D,id:b})};$e.displayName="TravelersStepInput",$e.fragment=He;var qe=(0,a.Ps)(Q(),He,Ge),ze=function(e){var n,t,a,o=e.headerRef,i=e.room,c=e.roomCount,l=e.roomIndex,d=e.singleUnit,s=e.totalTravelers,m=e.data,f=c===l+1,v=m.roomTitleAriaLabel,g=m.roomTitle,y=m.removeRoomButtonLabel,h=m.removeRoomButtonAriaLabel,D=m.adultsStepInput,I=m.childrenStepInput,x=m.childrenAges,A=m.roomRemovedLiveAnnounce,R=(0,u.useClickTracker)(),O=we(),P=ue().referrer;return r.createElement(E.H3,{key:"room-".concat(c,"-").concat(l),padding:d?{blockend:"three"}:{block:"three"},margin:d?{blockend:"three"}:{block:"three"},border:d?void 0:["blockend"]},r.createElement("div",null,r.createElement("h3",{tabIndex:-1,className:"uitk-type-200 uitk-type-medium","aria-label":_e(v,l+1,c),ref:f?o:null},r.createElement("span",{"aria-hidden":"true"},_e(g,l+1))),r.createElement($e,{travelerType:"adults",min:1,max:i.adults+14-s,roomIndex:l,roomCount:c,room:i,data:D}),r.createElement($e,{travelerType:"children",min:0,max:Math.min(6,((null===(n=i.children)||void 0===n?void 0:n.length)||0)+14-s),roomIndex:l,roomCount:c,room:i,data:I}),i.children&&(null===(t=i.children)||void 0===t?void 0:t.length)>0&&r.createElement(k.PX,{space:"two",columns:2},null===(a=i.children)||void 0===a?void 0:a.map((function(e,n){var t=e.age;return r.createElement(Ue,{key:n,childAge:t,childIndex:n,roomIndex:l,data:x})}))),0!==l&&r.createElement(E.H3,{padding:{blockstart:"four"}},r.createElement(b.lu,{justifyContent:"end"},r.createElement(b.Vt,null,r.createElement(p.qN,{onClick:function(){O({type:"REMOVE_ROOM",roomIndex:l}),R("".concat(P.pagePrefix,":RemoveRoom"),"Remove room"),(0,C.Pg)(_e(A,c))},"aria-label":Ve(h,l+1,c)},y))))))};ze.displayName="Room",ze.fragment=qe;var Qe=(0,a.Ps)(W(),qe,je),We=function(e){var n=e.data,t=e.onDismiss,a=e.onSave,o=e.onUpdate,i=e.submitDisabled,c=void 0!==i&&i,l=e.travelersInput,d=e.triggerRef,s=T(r.useReducer((function(e,n){var t=function(e,n){switch(n.type){case"ADD_ROOM":return P(O({},e),{rooms:e.rooms.concat([{adults:1}])});case"REMOVE_ROOM":var t=n.roomIndex;return P(O({},e),{rooms:e.rooms.filter((function(e,n){return n!==t}))});case"UPDATE_ADULTS_COUNT":var r=n.roomIndex,a=n.count;return P(O({},e),{rooms:e.rooms.map((function(e,n){return n===r?P(O({},e),{adults:a}):e}))});case"UPDATE_CHILDREN_COUNT":var o,i,u,c=n.roomIndex,l=n.count>(null!==(u=null===(i=e.rooms[c])||void 0===i||null===(o=i.children)||void 0===o?void 0:o.length)&&void 0!==u?u:0);return P(O({},e),{rooms:e.rooms.map((function(e,n){var t,r;return n===c?P(O({},e),{children:l?(null===(t=e.children)||void 0===t?void 0:t.concat([{age:0}]))||[{age:0}]:null===(r=e.children)||void 0===r?void 0:r.slice(0,-1)}):e}))});case"UPDATE_CHILD_AGE":var d=n.roomIndex,s=n.childIndex,m=n.childAge;return P(O({},e),{rooms:e.rooms.map((function(e,n){var t;return d===n?P(O({},e),{children:null===(t=e.children)||void 0===t?void 0:t.map((function(e,n){return s===n?{age:m}:e}))}):e}))});default:return e}}(e,n);return o&&o(t),t}),l),2),f=s[0],v=s[1],g=n.roomPicker,y=g.toolBarIconLabel,h=g.toolBarTitle,D=g.addRoomText,k=g.doneLabel,x=g.room,A=g.roomAddedLiveAnnounce,R=r.useRef(null),S=ue().referrer,N=(0,u.useClickTracker)();r.useEffect((function(){var e,n;"function"==typeof(null===(n=R)||void 0===n||null===(e=n.current)||void 0===e?void 0:e.focus)&&R.current.focus()}),[f.rooms.length]);var F=function(){(0,C.Pg)("",C.aC.ASSERTIVE)},_=r.useMemo((function(){return{id:"".concat(S.pagePrefix,":ChangeRoomGuest"),description:"Close Room Picker",callback:function(e,n){return N(e,n)}}}),[N]),L=f.rooms.reduce((function(e,n){var t;return e+n.adults+((null===(t=n.children)||void 0===t?void 0:t.length)||0)}),0),w=f.rooms.length>=8||L>=14;return r.createElement(Me,{value:v},r.createElement(m.A5,{type:"centered",centeredSheetSize:"small",isVisible:!0,triggerRef:d},r.createElement(I.tv,{toolbarTitle:h,navigationContent:{onClick:function(){t&&(F(),t())},onClickAnalytics:_,navType:"close",navIconLabel:y}}),r.createElement(E.H3,{className:"uitk-scroll-vertical",padding:{inline:"four",blockstart:"half",blockend:"three"}},r.createElement("section",null,f.rooms.map((function(e,n){return r.createElement(ze,{data:x,headerRef:R,key:n,room:e,roomCount:f.rooms.length,roomIndex:n,singleUnit:!D,totalTravelers:L})})),D&&r.createElement(E.H3,{padding:{blockstart:"four",blockend:"twelve"}},r.createElement(b.lu,{justifyContent:"end"},r.createElement(b.Vt,null,r.createElement(p.qN,{onClick:function(){v({type:"ADD_ROOM"}),N("".concat(S.pagePrefix,":AddRoom"),"Add room"),(0,C.Pg)(_e(A,f.rooms.length),C.aC.POLITE)},disabled:w},D)))),r.createElement(p.eA,{size:p.Pl.LARGE,onClick:function(){a&&(F(),a(f))},disabled:c},k)))))};We.displayName="RoomPicker",We.fragment=Qe;var Xe=function(e){var n=function(e){return{adultsString:r.useMemo((function(){return e.map((function(e){return e.adults})).filter((function(e){return e>0})).join(",")}),[e]),childrenString:r.useMemo((function(){return e.map((function(e,n){var t;return null===(t=e.children)||void 0===t?void 0:t.map((function(e){return"".concat(n+1,"_").concat(e.age)})).join(",")})).filter((function(e){return e&&""!==e})).join(",")}),[e])}}(e.rooms),t=n.adultsString,a=n.childrenString;return r.createElement(r.Fragment,null,t&&r.createElement("input",{type:"hidden",name:"adults",value:t,readOnly:!0}),a&&r.createElement("input",{type:"hidden",name:"children",value:a,readOnly:!0}))};Xe.displayName="TravelersHiddenInput";var Ke=function(e){return e.INPUT="input",e.LINK="link",e}(Ke||{}),Ye=(0,a.Ps)(X(),Qe,je),Je=[{adults:2}],Ze=function(e){var n,t=e.fieldName,a=e.className,o=e.data,i=e.closeOnSubmit,l=void 0===i||i,d=e.trigger,s=T(r.useState(!1),2),v=s[0],p=s[1],g=r.useRef(null),b=ue().referrer,E=J(),I=ne(),C=T((0,f.useDialog)("travelerPicks"),3),k=C[0],x=C[1],A=x.closeDialog,R=x.openDialog,S=C[2],N=(0,u.useClickTracker)(),F=r.useRef(null),_=(null===(n=I)||void 0===n?void 0:n.roomInput)||Je,L=T(r.useState(_),2),w=L[0],M=L[1];r.useEffect((function(){_&&M(_)}),[_]);var j=o.label,B=o.travelersSummary,V={rooms:w},G=Be(V,B,v),U=Be({rooms:w},B,v);r.useEffect((function(){p(!0)}),[]);var H=function(){var e,n;"function"==typeof(null===(n=g)||void 0===n||null===(e=n.current)||void 0===e?void 0:e.focus)&&g.current.focus()},$=function(e){var n=e.rooms;M(n),E({type:"change",field:t,value:e}),N("".concat(b.pagePrefix,":ChangeRoomGuestDone"),"Apply Room Picker"),H(),l&&A()},q=function(){R(),N("".concat(b.pagePrefix,":ChangeRoomGuest"),"Open Room Picker")};if("link"===d)return r.createElement(r.Fragment,null,r.createElement(h.n3,{onClick:q,inline:!0},r.createElement("button",{type:"button",ref:F},r.createElement(D.sc,{size:300},U))),r.createElement(Xe,{rooms:w}),r.createElement(m.Xw,{isVisible:k},r.createElement(S,null,r.createElement(We,{travelersInput:V,onSave:$,onDismiss:A,data:o,triggerRef:F}))));var z={id:"travelers-field-id",label:j,icon:"person"},Q=P(O({},z),{name:"adults"}),W=P(O({},z),{onChange:q,onClick:q,domRef:g}),X=r.createElement(c.Experiment,{name:"Vrbex_pets_toggle"},r.createElement(c.ExperimentControl,null,r.createElement(y.QG,P(O({},Q),{value:U,domRef:F}))),r.createElement(c.ExperimentVariant,{bucket:1},r.createElement(y.QG,P(O({},Q),{value:G,domRef:F})))),K=r.createElement(c.Experiment,{name:"Vrbex_pets_toggle"},r.createElement(c.ExperimentControl,null,r.createElement(y.sq,P(O({},W),{value:U,domRef:F}))),r.createElement(c.ExperimentVariant,{bucket:1},r.createElement(y.sq,P(O({},W),{value:G,domRef:F}))));return r.createElement("div",{className:a},!v&&X,v&&r.createElement(r.Fragment,null,K,r.createElement(Xe,{rooms:w})),r.createElement(m.Xw,{isVisible:k},r.createElement(S,null,r.createElement(We,{travelersInput:V,onSave:$,onDismiss:function(){A(),H()},data:o,triggerRef:F}))))};Ze.displayName="TravelersField",(Ze.fragment=Ye).__typename="LodgingFormTravelers";var en=Fe(Oe),nn=Fe(Ze),tn=Fe(Te)}}]);
//# sourceMappingURL=shared-ui-lodging-form.4b9dab7290bc0d697d6f.js.map